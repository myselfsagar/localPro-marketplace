<%- include('../../partials/header') %>

<main>
  <h1>Find Local Professionals</h1>

  <div class="search-container">
    <form action="/providers" method="GET">
      <input
        type="text"
        name="search"
        placeholder="Search by service or business name..."
        value="<%= searchTerm %>"
      />
      <input
        type="text"
        name="location"
        placeholder="Location (e.g., City)"
        value="<%= locationTerm %>"
      />
      <button type="submit">Search</button>
    </form>
  </div>
  <hr />

  <div class="provider-list">
    <% if (providers.length > 0) { %> <% providers.forEach(provider => { %>
    <div class="provider-card">
      <img
        src="<%= provider.profileImageUrl || '/images/default-profile.png' %>"
        alt="<%= provider.businessName %> Profile"
        style="
          max-width: 80px;
          height: 80px;
          object-fit: cover;
          border-radius: 50%;
          margin-bottom: 0.5rem;
        "
      />
      <h3>
        <a href="/providers/<%= provider.id %>"><%= provider.businessName %></a>
      </h3>
      <p>
        <strong>Proprietor:</strong> <%= provider.User.firstName %> <%=
        provider.User.lastName %>
      </p>
      <p><strong>Location:</strong> <%= provider.location %></p>
      <a href="/providers/<%= provider.id %>" class="btn">View Profile</a>
    </div>
    <% }) %> <% } else { %>
    <p>No providers have signed up yet. Check back soon!</p>
    <% } %>
  </div>
</main>

<%- include('../../partials/footer') %>
